const rA="data:audio/mpeg;base64,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",gA="data:audio/mpeg;base64,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",dA="/page6/assets/door1-CbcI8I_c.wav",bA="/page6/assets/bag-TcpZ8Nwp.mp3",BA="/page6/assets/bag_open-ig9X4wAM.mp3",wA="/page6/assets/bag-TcpZ8Nwp.mp3",pA="/page6/assets/failed-BNPLxPO-.mp3",qA="/page6/assets/horror-DFFpTguW.mp3",U=new Audio(rA),N=new Audio(gA),P=new Audio(dA),j=new Audio(bA),Z=new Audio(BA),uA=new Audio(wA),hA=new Audio(pA),C=new Audio(qA);C.loop=!0;U.pause();N.pause();P.pause();j.pause();Z.pause();uA.pause();const A={golbal_arr:{},scene_arr:{},line_arr:[],close_arr:{},note_arr:[],last_id:0,line_id:0,line_length:0,wall:1,scene:[],line:[],bag:[0],key:{door:"",next:"",id:0},boss:0,heart:0,qte:0};A.bag;const q=document.querySelector("#screen"),b=document.querySelector("#screen_ui"),X=document.querySelector("#screen_bg"),v=document.querySelector("#scene_ux"),l=document.querySelector("#scene_bg"),L=s("set_btn"),h=s("pop_note"),MA=s("next_scene_btn");q.appendChild(L);const D=s("end_div"),F=s("end_content"),$=s("end_share"),Y=s("end_retry");D.append(F,$,Y);const u=s("lines_div"),AA=s("lines_btn"),H=s("lines_name"),d=(e,n)=>{var t;if(l.innerHTML="",v.innerHTML="",b.innerHTML="",n?A.scene=n[e]:A.scene=A.scene_arr[e],!!A.scene)switch(A.scene.bg&&(l.className=A.scene.bg),A.line_arr[e]&&(A.line_length=A.line_arr[e].length),A.scene.type){case"anim":eA(),l.addEventListener("animationend",a=>{a.animationName===A.scene.bg&&A.scene.type==="anim"&&(l.className="",d(A.scene.next))});break;case"line":g(e);break;case"close":A.line_length=0,g(e);break;case"view":A.last_id=e,g(e);break;case"room":A.last_id=e,l.className=`${A.scene.bg}-${A.wall}`,(t=A.line_arr[e])!=null&&t[A.wall]?(A.line_length=A.line_arr[e][A.wall].length,g(A.wall,A.line_arr[e])):g(e);break;case"qte":l.className=`${A.scene.bg}-${A.qte}`,g(e);break;case"end":l.addEventListener("animationend",a=>{A.scene&&A.scene.type==="end"&&a.animationName===A.scene.bg&&(l.className="",l.innerHTML="",v.innerHTML="",b.innerHTML="",MA.click())});break}},g=(e,n,t)=>{var a;if(b.innerHTML="",n?A.line=n[e]:A.scene.type==="room"||(A.line=A.line_arr[e]),A.line&&A.line_length>0)u.innerHTML="",u.textContent=A.line[A.line_id],t&&(H.textContent=t,u.appendChild(H)),u.appendChild(AA),b.appendChild(u),A.line_id+=1,N.currentTime="",N.play();else switch(A.line_id=0,A.scene.type){case"line":eA(),d(A.scene.next);break;case"close":S(),LA();break;case"view":A.line_arr[e]&&delete A.line_arr[e],S(),yA();break;case"room":(a=A.line_arr[e])!=null&&a[A.wall]&&delete A.line_arr[e][A.wall],S(),kA();break;case"qte":A.line_arr[e]&&delete A.line_arr[e],CA(),tA(),QA();break}},S=()=>{let e=A.scene.ux;A.scene.type==="room"&&(e=A.scene.ux[A.wall-1]),e.forEach(n=>{if(n.type==="item"&&A.bag.includes(n.is))return;const t=document.createElement("div");t.className="btns_ux",v.appendChild(t),t.style.left=n.x+"vh",t.style.top=n.y+"vh",t.style.width=n.w+"vh",t.style.height=n.h+"vh",n.bg?t.classList.add(n.bg):t.style.background="blue",t.addEventListener("click",a=>{_A(a,n)})})},_A=(e,n)=>{switch(n.type){case"note":A.line_length=A.note_arr[n.is].length,g(n.is,A.note_arr);break;case"close":d(n.is,A.close_arr);break;case"next":n.wall&&(A.wall=n.wall),d(n.is);break;case"item":A.bag.push(n.is),O("item",A.golbal_arr.item[n.is].name),e.target.style.display="none";break;case"npc":n.name,A.line_length=A.note_arr[n.is].length,g(n.is,A.note_arr,n.name);break}},eA=()=>{if(A.scene.change)A.scene.change.forEach(e=>{e.wall?e.ux==="add"?A.scene_arr[e.id].ux[e.wall-1].push(e.add):(A.scene_arr[e.id].ux[e.wall-1][e.ux].type=e.type,A.scene_arr[e.id].ux[e.wall-1][e.ux].is=e.is):e.ux==="add"?A.scene_arr[e.id].ux.push(e.add):(A.scene_arr[e.id].ux[e.ux].type=e.type,A.scene_arr[e.id].ux[e.ux].is=e.is)});else return},O=(e,n)=>{switch(q.appendChild(h),e){case"item":h.textContent=`${n} ${A.golbal_arr.pop.item}`,j.play();break;case"door":h.textContent=A.golbal_arr.pop.door;break}};h.addEventListener("animationend",e=>{e.animationName==="show_anim"&&q.removeChild(h)});const W=s("qte_div"),nA=s("qte_btn","ui_btns"),EA=s("qte_bar"),K=s("qte_box"),w=s("qte_dot"),m=s("feedback","gmui_btns"),I=s("userHeart"),y=s("bossHeart");let fA=0;function CA(){A.qte=0,I.innerHTML="",y.innerHTML="",A.boss=A.scene.boss,A.heart=A.scene.user;for(let e=0;e<A.heart;e++){const n=s(0,"heart_icon");I.appendChild(n)}for(let e=0;e<A.boss;e++){const n=s(0,"boss_icon");y.appendChild(n)}}function tA(){fA=Date.now(),w.className="qte_start_anim",m.textContent="Press to move on",C.play()}function DA(){const n=window.getComputedStyle(w).transform;w.className="",w.style.transform=n}function mA(e,n){const t=e.getBoundingClientRect(),a=n.getBoundingClientRect();return t.left>=a.left&&t.right<=a.right}function IA(){const e=document.querySelector("#qte_bar");mA(w,e)?(m.textContent=A.golbal_arr.success,A.boss-=1,A.qte+=1,A.scene.mode==="fight"&&(l.className=`${A.scene.bg}-heart`),z("boss",y,A.boss)):(m.textContent=A.golbal_arr.failed,A.heart-=1,A.scene.mode==="fight"&&(l.className=`${A.scene.bg}-boss`),z("heart",I,A.heart)),DA(),hA.play()}function z(e,n,t){const a=n.querySelectorAll(`.${e}_icon`),r=a.length-t;if(r>0)for(let c=0;c<r;c++){const B=a[a.length-1-c];B.classList.add("heart_out_anim"),B.addEventListener("animationend",()=>{B.remove(),A.boss<1?(A.scene.reward&&(A.bag.push(A.scene.reward),O("item",A.golbal_arr.item[A.scene.reward].name)),d(A.scene.next),C.pause()):A.heart<1?(q.appendChild(D),J(),L.style.zIndex=0,F.textContent=A.golbal_arr.end[A.scene.end],C.pause()):(A.scene.mode==="run"?e==="boss"&&(l.className=`${A.scene.bg}-${A.qte}`):A.scene.mode==="fight"&&(l.className=`${A.scene.bg}-0`),tA())})}else if(r<0)for(let c=0;c<Math.abs(r);c++){const B=s(e,`${e}-icon`);n.appendChild(B)}}Y.addEventListener("click",()=>{J()});let x=!1;L.addEventListener("click",R(()=>{J()},300));const J=()=>{L.style.zIndex=11,x?q.removeChild(D):(q.appendChild(D),F.textContent=A.golbal_arr.end[0][0],$.textContent=A.golbal_arr.end[0][1],Y.textContent=A.golbal_arr.end[0][2]),x=!x},sA=s("btn_return","ui_btns"),M=s("btn_bag","ui_btns"),aA=s("btn_left","ui_btns"),lA=s("btn_right","ui_btns");AA.addEventListener("click",R(()=>{A.line_length-=1,g(A.scene.id),_()},300));const yA=()=>{b.append(M)},LA=()=>{b.append(sA,M)};sA.addEventListener("click",()=>{d(A.last_id),_()});const kA=()=>{b.append(aA,lA,M)};aA.addEventListener("click",()=>{A.wall>1?A.wall-=1:A.wall=4,d(A.scene.id),_()});lA.addEventListener("click",()=>{A.wall<4?A.wall+=1:A.wall=1,d(A.scene.id),_()});const QA=()=>{K.appendChild(EA),W.append(y,m,K,I,w,nA),b.appendChild(W)};nA.addEventListener("click",()=>IA());const _=()=>{U.currentTime=0,U.play()},f=s("bag_div"),p=s("bag_slots","bag_slots_close"),o=s("bag_view"),k=s(0,"bag_slots_btn_close"),T=s("bag_key_btn");let G=!1,Q=!1;M.addEventListener("click",R(()=>{G?(X.removeChild(f),_()):(oA(),Z.play()),G=!G},300));const oA=()=>{f.innerHTML="",p.innerHTML="",o.innerHTML="",o.classList="",f.append(o,p,k),A.bag.forEach((e,n)=>{const t=s(A.golbal_arr.item[e].bg,"bag_icon");t.draggable=!0,xA(t,e),p.appendChild(t),t.addEventListener("click",()=>{o.innerHTML="",T.textContent=A.golbal_arr.use,o.className!==A.golbal_arr.item[e].bg?(o.className=A.golbal_arr.item[e].bg,A.golbal_arr.item[e].type==="key"&&(o.appendChild(T),A.key.door=A.golbal_arr.item[e].door,A.key.next=A.golbal_arr.item[e].next,A.key.id=e)):o.className=""})}),X.appendChild(f)};k.addEventListener("click",()=>{Q?VA():SA()});T.addEventListener("click",()=>{l.className===A.key.door?(d(A.key.next),M.click(),P.play(),A.bag=A.bag.filter(e=>e!==A.key.id)):O("door")});const VA=()=>{Q=!1,o.style.height="100%",p.className="bag_slots_close",k.classList="bag_slots_btn_close"},SA=()=>{Q=!0,o.style.height="0%",o.innerHTML="",o.classList="",p.className="bag_slots_open",k.classList="bag_slots_btn_open"};let i=null,E=null;function xA(e,n){e.addEventListener("touchstart",function(t){Q&&(i=e,E=n)}),e.addEventListener("touchmove",function(t){if(!i)return;i.style.position="absolute";var a=t.targetTouches[0];const r=parseFloat(window.getComputedStyle(i).width),c=parseFloat(window.getComputedStyle(i).height);i.style.left=a.screenX-window.innerWidth/2+r*1.2+"px",i.style.top=a.screenY-window.innerHeight/2+c*1.2+"px"}),e.addEventListener("touchend",function(t){if(!i)return;const a=Math.floor((t.changedTouches[0].pageX-p.offsetLeft)/i.offsetWidth),r=Math.max(0,Math.min(A.bag.length-1,a)),c=A.bag[E];A.bag[E]=A.bag[r],A.bag[r]=c;const B=A.bag.filter((V,cA,iA)=>V!==void 0&&V!==""&&iA.indexOf(V)===cA);A.bag=B,oA(),i=null,E=null})}function s(e,n,t){const a=document.createElement("div");return e&&(a.id=e),n&&(a.className=n),a}function R(e,n=100){let t;return(...a)=>{clearTimeout(t),t=setTimeout(()=>e.apply(this,a),n)}}export{_A as click_ux,D as end_div,Y as end_retry,g as new_line,d as new_scene,MA as next_scene_btn,S as render_ux,A as user};
