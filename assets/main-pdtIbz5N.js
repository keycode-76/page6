const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/scene1-DfqxUXkH.js","assets/scene1-BlPwKnGC.css","assets/scene2-mrXgBpPy.js","assets/sound-Gwtqw6iZ.js","assets/scene2-DZuqGnrC.css","assets/controller-D1FB_Q_R.js"])))=>i.map(i=>d[i]);
(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))c(n);new MutationObserver(n=>{for(const e of n)if(e.type==="childList")for(const l of e.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function t(n){const e={};return n.integrity&&(e.integrity=n.integrity),n.referrerPolicy&&(e.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?e.credentials="include":n.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function c(n){if(n.ep)return;n.ep=!0;const e=t(n);fetch(n.href,e)}})();const O="modulepreload",R=function(s){return"/page6/"+s},S={},w=function(o,t,c){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),l=(e==null?void 0:e.nonce)||(e==null?void 0:e.getAttribute("nonce"));n=Promise.all(t.map(g=>{if(g=R(g),g in S)return;S[g]=!0;const m=g.endsWith(".css"),y=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${y}`))return;const d=document.createElement("link");if(d.rel=m?"stylesheet":O,m||(d.as="script",d.crossOrigin=""),d.href=g,l&&d.setAttribute("nonce",l),document.head.appendChild(d),m)return new Promise((p,a)=>{d.addEventListener("load",p),d.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${g}`)))})}))}return n.then(()=>o()).catch(e=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=e,window.dispatchEvent(l),!l.defaultPrevented)throw e})},T="/page6/assets/09ChillyRain-Cfp-r9cP.wav";let f="English";const L=document.querySelector("#EN"),I=document.querySelector("#CH"),A=document.querySelector(".EN"),B=document.querySelector(".CH");L.addEventListener("click",()=>{f="English",I.style.display="none",B.style.display="none"});I.addEventListener("click",()=>{f="Tradition-CN",L.style.display="none",A.style.display="none"});const k=new Audio(T);document.getElementById("click_to_start").addEventListener("click",()=>{switch(f){case"English":r=C;break;case"Tradition-CN":r=z;break;default:r=C;break}D()});const C={now_scene:0,now_end:0,qte:"Press the button when entering the dark area",success:"Success!",failed:"Missed!",use:"Use",pop:{item:"Obtained! Check it in the bag",door:"Not this door"},end:{0:["Settings","This is the share button. I'm not good at it yet. If it doesn't work, please copy the URL manually.","Retry this level","Volume"],1:"Ending 1: You were discovered. Return to the room.",2:"Ending 2: Escape failed. You never saw that child again.",3:"Ending 3: Escape successful. You ran towards the main road and were taken in by the town's police station."},item:{0:{name:"Map",bg:"bag_map",type:"map"},1:{name:"Secret Door Key",bg:"bag_key_0",type:"key",door:"s2-1-3",next:2},2:{name:"Back Door Key",bg:"bag_key_1",type:"key",door:"s2-close-2",next:8}}},z={now_scene:0,now_end:0,qte:"進入深色範圍時 按下按鈕",success:"成功！",failed:"沒按到！",use:"使用",pop:{item:"獲得! 請於包包內查看",door:"不是這扇門"},end:{0:["設定","這是分享按鈕 我還不太會做 沒有用的話 請自行拷貝網址","重玩這關","音量"],1:"結局一 你被發現了 回到房間",2:"結局二 逃出失敗 你再也沒見過那個小孩",3:"結局三 逃出成功 你們跑向大馬路 被鎮上警局收留"},item:{0:{name:"地圖",bg:"bag_map",type:"map"},1:{name:"暗門鑰匙",bg:"bag_key_0",type:"key",door:"s2-1-3",next:2},2:{name:"後門鑰匙",bg:"bag_key_1",type:"key",door:"s2-close-2",next:8}}};let r;function D(){_(!0);const s=document.getElementById("game_container");s.innerHTML="";const o=i("background"),t=i("screen"),c=i("set_btn"),n=i("screen_border"),e=i("screen_bg"),l=i("screen_ui"),g=i("scene"),m=i("scene_ux"),y=i("scene_bg"),d=i("end_div"),p=i("end_content"),a=i("end_volume"),b=i("volume_add",0,">"),h=i("volume_sub",0,"<"),v=i("volume_text"),u=i("end_share"),x=i("end_retry");d.append(p,a,u,x),e.appendChild(g),g.append(y,m),t.append(n,e,l,d,c),s.append(o,t),d.style.zIndex=-1,d.style.display="none",p.textContent=r.end[0][0],u.textContent=r.end[0][1],x.textContent=r.end[0][2],a.textContent=r.end[0][3],a.append(h,v,b),N(),u.onclick=function(){navigator.share&&navigator.share({title:"前往Google",text:"走吧?走吧!",url:"https://keycode-76.github.io/page6/"}).then(()=>console.log("成功！")).catch(P=>console.log("發生錯誤",P))},r.now_scene=1,q()}function E(s){const o=document.querySelector("#set_btn"),t=document.querySelector("#scene_bg"),c=document.querySelector("#end_div"),n=document.querySelector("#end_content");_(!1),c.style.display="flex",end_retry.textContent=r.end[0][2],t.className="",c.style.zIndex=1,o.style.zIndex=0,n.textContent=r.end[s],k.currentTime=0,k.play()}function U(s,o){let t=0;const c=s.length;s.forEach(n=>{const e=new Image;e.src=n,e.onload=e.onerror=()=>{t++,t===c&&o()}})}function q(){_(!0);const s=document.querySelector("#scene_bg"),o=document.querySelector("#end_div");let t="",c=[];switch(r.now_scene){case 1:if(r.now_end===0)t=w(()=>import("./scene1-DfqxUXkH.js"),__vite__mapDeps([0,1])),c=["/src/assets/img/s1/0.png","/src/assets/img/s1/1-1.png","/src/assets/img/s1/1-2.png","/src/assets/img/s1/1-3.png","/src/assets/img/s1/1-4.png","/src/assets/img/s1/2-1.png","/src/assets/img/s1/2-2.png","/src/assets/img/s1/2-3.png","/src/assets/img/s1/2-4.png","/src/assets/img/s1/3-1.png","/src/assets/img/s1/3-2.png","/src/assets/img/s1/3-3.png","/src/assets/img/s1/3-4.png","/src/assets/img/s1/4-1.png","/src/assets/img/s1/4-2.png","/src/assets/img/s1/4-3.png","/src/assets/img/s1/4-4.png","/src/assets/img/qte/1-1.png","/src/assets/img/qte/1-2.png","/src/assets/img/qte/1-3.png","/src/assets/img/qte/1-4.png","/src/assets/img/qte/1-lose.png","/src/assets/img/main/btn-bag.png","/src/assets/img/main/btn-return.png","/src/assets/img/main/btn-right.png","/src/assets/img/main/btn-qte.png","/src/assets/img/item/icon-key0.png","/src/assets/img/item/icon-key1.png","/src/assets/img/item/icon-map.png","/src/assets/img/item/icon-map.png","/src/assets/img/item/1.png","/src/assets/img/item/2.png","/src/assets/img/map/1.png"],s.className="image_loader1";else{E(r.now_end);return}break;case 2:if(r.now_end===0)t=w(()=>import("./scene2-mrXgBpPy.js"),__vite__mapDeps([2,3,4])),c=["src/assets/img/s2/0.png","src/assets/img/s2/1-1.png","src/assets/img/s2/1-2.png","src/assets/img/s2/1-3.png","src/assets/img/s2/1-4.png"],s.className="image_loader2";else{E(r.now_end);return}break;default:E(3);break}U(c,()=>{Promise.all([t,w(()=>import("./controller-D1FB_Q_R.js"),__vite__mapDeps([5,3]))]).then(([n,e])=>{const{s_data:l,s_lines:g,s_close:m,s_note:y,s_item:d,s_init:p}=n,{user:a,new_scene:b,end_retry:h,next_scene_btn:v}=e;p(f),a.scene_arr=l,a.line_arr=g,a.close_arr=m,a.note_arr=y,a.golbal_arr=r,a.wall=1,a.line_id=0,d.forEach(u=>{a.bag.includes(u)||a.bag.push(u)}),s.addEventListener("animationend",u=>{u.animationName.includes("image_loader")&&(s.className="",_(!1),b(0,l))}),h.addEventListener("click",()=>{r.now_scene>2&&(r.now_scene=2),r.now_end=0,o.style.zIndex=-1,_(!1),q(),k.pause()}),v.addEventListener("click",()=>{r.now_scene=a.golbal_arr.now_scene,_(!1),q()})}).catch(n=>{console.error("Failed to load script:",n)})})}function _(s){const o=document.getElementById("initializator");s?o.style.display="block":o.style.display="none"}function N(){const s=window.innerWidth,o=window.innerHeight,t=document.querySelector("#screen");s*1.9<o?t.className="screen_portrait":t.className="screen_landscape"}window.addEventListener("resize",N);function i(s,o,t){const c=document.createElement("div");return s&&(c.id=s),o&&(c.className=o),t&&(c.textContent=t),c}export{f as l};
