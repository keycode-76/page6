const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/scene1-cMFQBX1O.js","assets/scene1-D75z8bLF.css","assets/scene2-Bn7PjqK_.js","assets/sound-Gwtqw6iZ.js","assets/scene2-Dk8_uDuc.css","assets/controller-D1FB_Q_R.js"])))=>i.map(i=>d[i]);
(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))c(n);new MutationObserver(n=>{for(const e of n)if(e.type==="childList")for(const l of e.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function s(n){const e={};return n.integrity&&(e.integrity=n.integrity),n.referrerPolicy&&(e.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?e.credentials="include":n.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function c(n){if(n.ep)return;n.ep=!0;const e=s(n);fetch(n.href,e)}})();const O="modulepreload",R=function(t){return"/page6/"+t},C={},w=function(o,s,c){let n=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),l=(e==null?void 0:e.nonce)||(e==null?void 0:e.getAttribute("nonce"));n=Promise.all(s.map(u=>{if(u=R(u),u in C)return;C[u]=!0;const _=u.endsWith(".css"),y=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${y}`))return;const d=document.createElement("link");if(d.rel=_?"stylesheet":O,_||(d.as="script",d.crossOrigin=""),d.href=u,l&&d.setAttribute("nonce",l),document.head.appendChild(d),_)return new Promise((g,a)=>{d.addEventListener("load",g),d.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${u}`)))})}))}return n.then(()=>o()).catch(e=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=e,window.dispatchEvent(l),!l.defaultPrevented)throw e})},T="/page6/assets/09ChillyRain-Cfp-r9cP.wav";let f="English";const I=document.querySelector("#EN"),q=document.querySelector("#CH"),A=document.querySelector(".EN"),B=document.querySelector(".CH");I.addEventListener("click",()=>{f="English",q.style.display="none",B.style.display="none"});q.addEventListener("click",()=>{f="Tradition-CN",I.style.display="none",A.style.display="none"});const k=new Audio(T);document.getElementById("click_to_start").addEventListener("click",()=>{switch(f){case"English":r=L;break;case"Tradition-CN":r=z;break;default:r=L;break}D()});const L={now_scene:0,now_end:0,qte:"Press the button when entering the dark area",success:"Success!",failed:"Missed!",use:"Use",pop:{item:"Obtained! Check it in the bag",door:"Not this door"},end:{0:["Settings","This is the share button. I'm not good at it yet. If it doesn't work, please copy the URL manually.","Retry this level","Volume"],1:"Ending 1: You were discovered. Return to the room.",2:"Ending 2: Escape failed. You never saw that child again.",3:"Ending 3: Escape successful. You ran towards the main road and were taken in by the town's police station."},item:{0:{name:"Map",bg:"bag_map",type:"map"},1:{name:"Secret Door Key",bg:"bag_key_0",type:"key",door:"s2-1-3",next:2},2:{name:"Back Door Key",bg:"bag_key_1",type:"key",door:"s2-close-2",next:8}}},z={now_scene:0,now_end:0,qte:"進入深色範圍時 按下按鈕",success:"成功！",failed:"沒按到！",use:"使用",pop:{item:"獲得! 請於包包內查看",door:"不是這扇門"},end:{0:["設定","這是分享按鈕 我還不太會做 沒有用的話 請自行拷貝網址","重玩這關","音量"],1:"結局一 你被發現了 回到房間",2:"結局二 逃出失敗 你再也沒見過那個小孩",3:"結局三 逃出成功 你們跑向大馬路 被鎮上警局收留"},item:{0:{name:"地圖",bg:"bag_map",type:"map"},1:{name:"暗門鑰匙",bg:"bag_key_0",type:"key",door:"s2-1-3",next:2},2:{name:"後門鑰匙",bg:"bag_key_1",type:"key",door:"s2-close-2",next:8}}};let r;function D(){p(!0);const t=document.getElementById("game_container");t.innerHTML="";const o=i("background"),s=i("screen"),c=i("set_btn"),n=i("screen_border"),e=i("screen_bg"),l=i("screen_ui"),u=i("scene"),_=i("scene_ux"),y=i("scene_bg"),d=i("end_div"),g=i("end_content"),a=i("end_volume"),h=i("volume_add",0,">"),b=i("volume_sub",0,"<"),v=i("volume_text"),m=i("end_share"),S=i("end_retry");d.append(g,a,m,S),e.appendChild(u),u.append(y,_),s.append(n,e,l,d,c),t.append(o,s),d.style.zIndex=-1,d.style.display="none",g.textContent=r.end[0][0],m.textContent=r.end[0][1],S.textContent=r.end[0][2],a.textContent=r.end[0][3],a.append(b,v,h),N(),m.onclick=function(){navigator.share&&navigator.share({title:"前往Google",text:"走吧?走吧!",url:"https://keycode-76.github.io/page6/"}).then(()=>console.log("成功！")).catch(P=>console.log("發生錯誤",P))},r.now_scene=1,x()}function E(t){const o=document.querySelector("#set_btn"),s=document.querySelector("#scene_bg"),c=document.querySelector("#end_div"),n=document.querySelector("#end_content");p(!1),c.style.display="flex",end_retry.textContent=r.end[0][2],s.className="",c.style.zIndex=1,o.style.zIndex=0,n.textContent=r.end[t],k.currentTime=0,k.play()}function U(t,o){let s=0;const c=t.length;t.forEach(n=>{const e=new Image;e.src=n,e.onload=e.onerror=()=>{s++,s===c&&o()}})}function x(){p(!0);const t=document.querySelector("#scene_bg"),o=document.querySelector("#end_div");let s="",c=[];switch(r.now_scene){case 1:if(r.now_end===0)s=w(()=>import("./scene1-cMFQBX1O.js"),__vite__mapDeps([0,1])),c=["src/assets/img/s1/0.png","src/assets/img/s1/1-1.png","src/assets/img/s1/1-2.png","src/assets/img/s1/1-3.png","src/assets/img/s1/1-4.png"],t.className="image_loader1";else{E(r.now_end);return}break;case 2:if(r.now_end===0)s=w(()=>import("./scene2-Bn7PjqK_.js"),__vite__mapDeps([2,3,4])),c=["src/assets/img/s2/0.png","src/assets/img/s2/1-1.png","src/assets/img/s2/1-2.png","src/assets/img/s2/1-3.png","src/assets/img/s2/1-4.png"],t.className="image_loader2";else{E(r.now_end);return}break;default:E(3);break}U(c,()=>{Promise.all([s,w(()=>import("./controller-D1FB_Q_R.js"),__vite__mapDeps([5,3]))]).then(([n,e])=>{const{s_data:l,s_lines:u,s_close:_,s_note:y,s_item:d,s_init:g}=n,{user:a,new_scene:h,end_retry:b,next_scene_btn:v}=e;g(f),a.scene_arr=l,a.line_arr=u,a.close_arr=_,a.note_arr=y,a.golbal_arr=r,a.wall=1,a.line_id=0,d.forEach(m=>{a.bag.includes(m)||a.bag.push(m)}),t.addEventListener("animationend",m=>{m.animationName.includes("image_loader")&&(t.className="",p(!1),h(0,l))}),b.addEventListener("click",()=>{r.now_scene>2&&(r.now_scene=2),r.now_end=0,o.style.zIndex=-1,p(!1),x(),k.pause()}),v.addEventListener("click",()=>{r.now_scene=a.golbal_arr.now_scene,p(!1),x()})}).catch(n=>{console.error("Failed to load script:",n)})})}function p(t){const o=document.getElementById("initializator");t?o.style.display="block":o.style.display="none"}function N(){const t=window.innerWidth,o=window.innerHeight,s=document.querySelector("#screen");t*1.9<o?s.className="screen_portrait":s.className="screen_landscape"}window.addEventListener("resize",N);function i(t,o,s){const c=document.createElement("div");return t&&(c.id=t),o&&(c.className=o),s&&(c.textContent=s),c}export{f as l};
